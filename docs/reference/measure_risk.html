<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Disclosure Risk for Categorical Variables — measure_risk • sdcMicro</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Disclosure Risk for Categorical Variables — measure_risk" />

<meta property="og:description" content="The function measures the disclosure risk for weighted or unweighted data.
It computes the individual risk (and household risk if reasonable) and the
global risk. It also computes a risk threshold based on a global risk value.
Prints a 'measure_risk'-object
Prints a 'ldiversity'-object" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sdcMicro</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">5.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sdcMicro.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sdcTools/sdcMicro">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Disclosure Risk for Categorical Variables</h1>
    <small>Source: <a href='https://github.com/sdcTools/sdcMicro/blob/master/R/measure_risk.R'><code>R/measure_risk.R</code></a></small>
    </div>

    
    <p>The function measures the disclosure risk for weighted or unweighted data.
It computes the individual risk (and household risk if reasonable) and the
global risk. It also computes a risk threshold based on a global risk value.</p>
<p>Prints a 'measure_risk'-object</p>
<p>Prints a 'ldiversity'-object</p>
    

    <pre class="usage"><span class='fu'>measure_risk</span>(<span class='no'>obj</span>, <span class='no'>...</span>)

<span class='fu'>ldiversity</span>(<span class='no'>obj</span>, <span class='kw'>ldiv_index</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>l_recurs_c</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>missing</span> <span class='kw'>=</span> -<span class='fl'>999</span>, <span class='no'>...</span>)

<span class='co'># S3 method for measure_risk</span>
<span class='fu'>print</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for ldiversity</span>
<span class='fu'>print</span>(<span class='no'>x</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>Object of class <code>sdcMicroObj-class</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>see arguments below</p><ul>
<li><p>data: Input data, a data.frame.</p></li>
<li><p>keyVars: names (or indices) of categorical key variables (for data-frame method)</p></li>
<li><p>w: name of variable containing sample weights</p></li>
<li><p>hid: name of the clustering variable, e.g. the household ID</p></li>
<li><p>max_global_risk: Maximal global risk for threshold computation</p></li>
<li><p>fast_hier: If TRUE a fast approximation is computed if household data are provided.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>ldiv_index</th>
      <td><p>indices (or names) of the variables used for l-diversity</p></td>
    </tr>
    <tr>
      <th>l_recurs_c</th>
      <td><p>l-Diversity Constant</p></td>
    </tr>
    <tr>
      <th>missing</th>
      <td><p>a integer value to be used as missing value in the C++ routine</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Output of measure_risk() or ldiversity()</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A modified <code>sdcMicroObj-class</code> object or a list with the following elements:</p><ul>
<li><p>global_risk_ER: expected number of re-identification.</p></li>
<li><p>global_risk: global risk (sum of indivdual risks).</p></li>
<li><p>global_risk_pct: global risk in percent.</p></li>
<li><p>Res: matrix with the risk, frequency in the sample and grossed-up frequency in the population (and the hierachical risk) for each observation.</p></li>
<li><p>global_threshold: for a given max_global_risk the threshold for the risk of observations.</p></li>
<li><p>max_global_risk: the input max_global_risk of the function.</p></li>
<li><p>hier_risk_ER: expected number of re-identification with household structure.</p></li>
<li><p>hier_risk: global risk with household structure (sum of indivdual risks).</p></li>
<li><p>hier_risk_pct: global risk with household structure in percent.</p></li>
<li><p>ldiverstiy: Matrix with Distinct_Ldiversity,
Entropy_Ldiversity and Recursive_Ldiversity for each sensitivity variable.</p></li>
</ul>

<p>Prints risk-information into the console</p>
<p>Information on L-Diversity Measures in the console</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>To be used when risk of disclosure for individuals within a family is
considered to be statistical independent.</p>
<p>Internally, function <em>freqCalc()</em> and <em>indivRisk</em> are used for
estimation.</p>
<p>Measuring individual risk: The individual risk approach based on so-called
super-population models. In such models population frequency counts are
modeled given a certain distribution.  The estimation procedure of sample
frequency counts given the population frequency counts is modeled by
assuming a negative binomial distribution. This is used for the estimation
of the individual risk. The extensive theory can be found in Skinner (1998),
the approximation formulas for the individual risk used is described in
Franconi and Polettini (2004).</p>
<p>Measuring hierarchical risk: If &#8220;hid&#8221; - the index of variable holding
information on the hierarchical cluster structures (e.g., individuals that
are clustered in households) - is provided, the hierarchical risk is
additional estimated.  Note that the risk of re-identifying an individual
within a household may also affect the probability of disclosure of other
members in the same household. Thus, the household or cluster-structure of
the data must be taken into account when estimating disclosure risks. It is
commonly assumed that the risk of re-identification of a household is the
risk that at least one member of the household can be disclosed. Thus this
probability can be simply estimated from individual risks as 1 minus the
probability that no member of the household can be identified.</p>
<p>Global risk: The sum of the individual risks in the dataset gives the
expected number of re-identifications that serves as measure of the global
risk.</p>
<p>l-Diversity: If &#8220;ldiv_index&#8221; is unequal to NULL, i.e. if the indices
of sensible variables are specified, various measures for l-diversity are
calculated. l-diverstiy is an extension of the well-known k-anonymity
approach where also the uniqueness in sensible variables for each pattern
spanned by the key variables are evaluated.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Franconi, L. and Polettini, S. (2004) <em>Individual risk
estimation in mu-Argus: a review</em>. Privacy in Statistical Databases, Lecture
Notes in Computer Science, 262--272. Springer</p>
<p>Machanavajjhala, A. and Kifer, D. and Gehrke, J. and Venkitasubramaniam, M.
(2007) <em>l-Diversity: Privacy Beyond k-Anonymity</em>.  ACM Trans. Knowl.
Discov. Data, 1(1)</p>
<p>Templ, M. Statistical Disclosure Control for Microdata: Methods and Applications in R.
<em>Springer International Publishing</em>, 287 pages, 2017. ISBN 978-3-319-50272-4.
doi: <a href='http://doi.org/10.1007/978-3-319-50272-4'>10.1007/978-3-319-50272-4</a>
.</p>
<p>#' Templ, M. and Kowarik, A. and Meindl, B.
Statistical Disclosure Control for Micro-Data Using the R Package sdcMicro.
<em>Journal of Statistical Software</em>, <strong>67</strong> (4), 1--36, 2015. doi: <a href='http://doi.org/10.18637/jss.v067.i04'>10.18637/jss.v067.i04</a></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='freqCalc.html'>freqCalc</a></code>, <code><a href='indivRisk.html'>indivRisk</a></code></p>
<p><code>measure_risk</code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## measure_risk with sdcMicro objects:</span>
<span class='fu'>data</span>(<span class='no'>testdata</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>createSdcObj</span>(<span class='no'>testdata</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'urbrur'</span>,<span class='st'>'roof'</span>,<span class='st'>'walls'</span>,<span class='st'>'water'</span>,<span class='st'>'electcon'</span>),
<span class='kw'>numVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'expend'</span>,<span class='st'>'income'</span>,<span class='st'>'savings'</span>), <span class='kw'>w</span><span class='kw'>=</span><span class='st'>'sampling_weight'</span>)

<span class='co'>## risk is already estimated and available in...</span>
<span class='fu'>names</span>(<span class='no'>sdc</span>@<span class='kw'>risk</span>)</div><div class='output co'>#&gt; [1] "global"     "individual" "numeric"   </div><div class='input'>
<span class='co'>## measure risk on data frames or matrices:</span>
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>measure_risk</span>(<span class='no'>testdata</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"urbrur"</span>,<span class='st'>"roof"</span>,<span class='st'>"walls"</span>,<span class='st'>"water"</span>,<span class='st'>"sex"</span>))
<span class='fu'>print</span>(<span class='no'>res</span>)</div><div class='output co'>#&gt; 
#&gt; --------------------------
#&gt; 165 obs. with higher risk as the main part
#&gt; Expected no. of re-identifications:
#&gt;  93 ( 2.03 %)
#&gt; Threshold: 0.03 
#&gt;  (for maximal global risk 0.01 )
#&gt; --------------------------</div><div class='input'><span class='fu'>head</span>(<span class='no'>res</span>$<span class='no'>Res</span>)</div><div class='output co'>#&gt;             risk  fk  Fk
#&gt; [1,] 0.002785515 359 359
#&gt; [2,] 0.002849003 351 351
#&gt; [3,] 0.002785515 359 359
#&gt; [4,] 0.002785515 359 359
#&gt; [5,] 0.006211180 161 161
#&gt; [6,] 0.006666667 150 150</div><div class='input'><span class='no'>resw</span> <span class='kw'>&lt;-</span> <span class='fu'>measure_risk</span>(<span class='no'>testdata</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"urbrur"</span>,<span class='st'>"roof"</span>,<span class='st'>"walls"</span>,<span class='st'>"water"</span>,<span class='st'>"sex"</span>),<span class='kw'>w</span><span class='kw'>=</span><span class='st'>"sampling_weight"</span>)
<span class='fu'>print</span>(<span class='no'>resw</span>)</div><div class='output co'>#&gt; 
#&gt; --------------------------
#&gt; 0 obs. with higher risk as the main part
#&gt; Expected no. of re-identifications:
#&gt;  1.53 ( 0.03 %)
#&gt; Threshold: Inf 
#&gt;  (for maximal global risk 0.01 )
#&gt; --------------------------</div><div class='input'><span class='fu'>head</span>(<span class='no'>resw</span>$<span class='no'>Res</span>)</div><div class='output co'>#&gt;              risk  fk    Fk
#&gt; [1,] 2.793218e-05 359 35900
#&gt; [2,] 2.857061e-05 351 35100
#&gt; [3,] 2.793218e-05 359 35900
#&gt; [4,] 2.793218e-05 359 35900
#&gt; [5,] 6.249609e-05 161 16100
#&gt; [6,] 6.710959e-05 150 15000</div><div class='input'><span class='no'>res1</span> <span class='kw'>&lt;-</span> <span class='fu'>ldiversity</span>(<span class='no'>testdata</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"urbrur"</span>,<span class='st'>"roof"</span>,<span class='st'>"walls"</span>,<span class='st'>"water"</span>,<span class='st'>"sex"</span>),<span class='kw'>ldiv_index</span><span class='kw'>=</span><span class='st'>"electcon"</span>)
<span class='fu'>print</span>(<span class='no'>res1</span>)</div><div class='output co'>#&gt; --------------------------
#&gt; L-Diversity Measures 
#&gt; --------------------------
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   1.000   2.000   3.000   2.374   3.000   3.000 </div><div class='input'><span class='fu'>head</span>(<span class='no'>res1</span>)</div><div class='output co'>#&gt; [1] 3 3 3 3 2 2</div><div class='input'><span class='no'>res2</span> <span class='kw'>&lt;-</span> <span class='fu'>ldiversity</span>(<span class='no'>testdata</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"urbrur"</span>,<span class='st'>"roof"</span>,<span class='st'>"walls"</span>,<span class='st'>"water"</span>,<span class='st'>"sex"</span>),<span class='kw'>ldiv_index</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"electcon"</span>,<span class='st'>"relat"</span>))
<span class='fu'>print</span>(<span class='no'>res2</span>)</div><div class='output co'>#&gt; --------------------------
#&gt; L-Diversity Measures 
#&gt; --------------------------
#&gt;  electcon_Distinct_Ldiversity relat_Distinct_Ldiversity
#&gt;  Min.   :1.000                Min.   :1.000            
#&gt;  1st Qu.:2.000                1st Qu.:5.000            
#&gt;  Median :3.000                Median :5.000            
#&gt;  Mean   :2.374                Mean   :5.524            
#&gt;  3rd Qu.:3.000                3rd Qu.:7.000            
#&gt;  Max.   :3.000                Max.   :8.000            </div><div class='input'><span class='fu'>head</span>(<span class='no'>res2</span>)</div><div class='output co'>#&gt; [1] 3 3 3 3 2 2</div><div class='input'>
<span class='co'># measure risk with household risk</span>
<span class='no'>resh</span> <span class='kw'>&lt;-</span> <span class='fu'>measure_risk</span>(<span class='no'>testdata</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"urbrur"</span>,<span class='st'>"roof"</span>,<span class='st'>"walls"</span>,<span class='st'>"water"</span>,<span class='st'>"sex"</span>),<span class='kw'>w</span><span class='kw'>=</span><span class='st'>"sampling_weight"</span>,<span class='kw'>hid</span><span class='kw'>=</span><span class='st'>"ori_hid"</span>)
<span class='fu'>print</span>(<span class='no'>resh</span>)</div><div class='output co'>#&gt; 
#&gt; --------------------------
#&gt; 0 obs. with higher risk as the main part
#&gt; Expected no. of re-identifications:
#&gt;  1.53 ( 0.03 %)
#&gt; Threshold: Inf 
#&gt;  (for maximal global risk 0.01 )
#&gt; --------------------------
#&gt; --------------------------
#&gt; Hierarchical risk 
#&gt; --------------------------
#&gt; Expected no. of re-identifications:
#&gt;  7.18 ( 0.16 % )</div><div class='input'>
<span class='co'># change max_global_risk</span>
<span class='no'>rest</span> <span class='kw'>&lt;-</span> <span class='fu'>measure_risk</span>(<span class='no'>testdata</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"urbrur"</span>,<span class='st'>"roof"</span>,<span class='st'>"walls"</span>,<span class='st'>"water"</span>,<span class='st'>"sex"</span>),
  <span class='kw'>w</span><span class='kw'>=</span><span class='st'>"sampling_weight"</span>,<span class='kw'>max_global_risk</span><span class='kw'>=</span><span class='fl'>0.0001</span>)
<span class='fu'>print</span>(<span class='no'>rest</span>)</div><div class='output co'>#&gt; 
#&gt; --------------------------
#&gt; 0 obs. with higher risk as the main part
#&gt; Expected no. of re-identifications:
#&gt;  1.53 ( 0.03 %)
#&gt; Threshold: 0 
#&gt;  (for maximal global risk 0 )
#&gt; --------------------------</div><div class='input'>
<span class='co'>## for objects of class sdcMicro:</span>
<span class='fu'>data</span>(<span class='no'>testdata2</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>createSdcObj</span>(<span class='no'>testdata2</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'urbrur'</span>,<span class='st'>'roof'</span>,<span class='st'>'walls'</span>,<span class='st'>'water'</span>,<span class='st'>'electcon'</span>,<span class='st'>'relat'</span>,<span class='st'>'sex'</span>),
  <span class='kw'>numVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'expend'</span>,<span class='st'>'income'</span>,<span class='st'>'savings'</span>), <span class='kw'>w</span><span class='kw'>=</span><span class='st'>'sampling_weight'</span>)
<span class='co'>## already interally applied and availabe in object sdc:</span>
<span class='co'>## sdc &lt;- measure_risk(sdc)</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Alexander Kowarik, Bernhard Meindl, Matthias Templ, Bernd Prantner, minor parts of IHSN C++ source

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Bernhard Meindl, Alexander Kowarik, Matthias Templ.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

