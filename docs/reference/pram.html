<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Post Randomization — pram • sdcMicro</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Post Randomization — pram" />

<meta property="og:description" content="To be used on categorical data stored as factors. The algorithm randomly
changes the values of variables in selected records (usually the risky ones)
according to an invariant probability transition matrix or a custom-defined
transition matrix." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sdcMicro</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">5.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sdcMicro.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sdcTools/sdcMicro">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Post Randomization</h1>
    <small>Source: <a href='https://github.com/sdcTools/sdcMicro/blob/master/R/pram.R'><code>R/pram.R</code></a></small>
    </div>

    
    <p>To be used on categorical data stored as factors. The algorithm randomly
changes the values of variables in selected records (usually the risky ones)
according to an invariant probability transition matrix or a custom-defined
transition matrix.</p>
    

    <pre class="usage"><span class='fu'>pram</span>(<span class='no'>obj</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>strata_variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>pd</span> <span class='kw'>=</span> <span class='fl'>0.8</span>,
  <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>Input data. Allowed input data are objects of class
<code>data.frame</code>, <code>factor</code> or <code>sdcMicroObj-class</code>.</p></td>
    </tr>
    <tr>
      <th>variables</th>
      <td><p>Names of variables in 'obj' on which post-randomization
should be applied. If obj is a factor, this argument is ignored. Please note that
pram can only be applied to factor-variables.</p></td>
    </tr>
    <tr>
      <th>strata_variables</th>
      <td><p>Names of variables for stratification (will be set
automatically for an object of class <code>sdcMicroObj-class</code>. One can also specify
an integer vector or factor that specifies that desired groups. This vector must match the dimension
of the input data set, however. For a possible use case, have a look at the examples.</p></td>
    </tr>
    <tr>
      <th>pd</th>
      <td><p>minimum diagonal entries for the generated transition matrix P.
Either a vector of length 1 (which is recycled) or a vector of the same length as
the number of variables that should be postrandomized. It is also possible to set <code>pd</code>
to a numeric matrix. This matrix will be used directly as the transition matrix. The matrix must
be constructed as follows:</p><ul>
<li><p>the matrix must be a square matrix</p></li>
<li><p>the rownames and colnames of the matrix must match the levels (in the same order) of the factor-variable that should be
postrandomized.</p></li>
<li><p>the rowSums and colSums of the matrix need to equal 1</p></li>
</ul><p>It is also possible to combine the different ways. For details have a look at the examples.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>amount of perturbation for the invariant Pram method. This is a numeric vector
of length 1 (that will be recycled if necessary) or a vector of the same length as the number
of variables. If one specified as transition matrix directly, alpha is ignored.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further input, currently ignored.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a modified <code>sdcMicroObj-class</code> object or a new object containing
original and post-randomized variables (with suffix "_pram").</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Deprecated method 'pram_strata'is no longer available
in sdcMicro &gt; 4.5.0</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='http://www.gnu.org/software/glpk'>http://www.gnu.org/software/glpk</a></p>
<p>Kowarik, A. and Templ, M. and Meindl, B. and Fonteneau, F. and Prantner, B.:
<em>Testing of IHSN Cpp Code and Inclusion of New Methods into sdcMicro</em>,
in: Lecture Notes in Computer Science, J. Domingo-Ferrer, I. Tinnirello
(editors.); Springer, Berlin, 2012, ISBN: 978-3-642-33626-3, pp. 63-77. 
doi: <a href='http://doi.org/10.1007/978-3-642-33627-0_6'>10.1007/978-3-642-33627-0_6</a></p>
<p>Templ, M. and Kowarik, A. and Meindl, B. 
Statistical Disclosure Control for Micro-Data Using the R Package sdcMicro. 
<em>Journal of Statistical Software</em>, <strong>67</strong> (4), 1--36, 2015. doi: <a href='http://doi.org/10.18637/jss.v067.i04'>10.18637/jss.v067.i04</a></p>
<p>Templ, M. Statistical Disclosure Control for Microdata: Methods and Applications in R.
<em>Springer International Publishing</em>, 287 pages, 2017. ISBN 978-3-319-50272-4.
doi: <a href='http://doi.org/10.1007/978-3-319-50272-4'>10.1007/978-3-319-50272-4</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>testdata</span>)

<span class='co'>## application on a factor-variable</span>
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='fu'>as.factor</span>(<span class='no'>testdata</span>$<span class='no'>roof</span>))
<span class='fu'>print</span>(<span class='no'>res</span>)</div><div class='output co'>#&gt; Number of changed observations: 
#&gt; - - - - - - - - - - - 
#&gt; x != x_pram : 224 (4.89%)</div><div class='input'><span class='fu'>summary</span>(<span class='no'>res</span>)</div><div class='output co'>#&gt; Variable:  x
#&gt;  ----------------------
#&gt; Frequencies in original and perturbed data:
#&gt;                                 x   2    4  5  6  9 NA
#&gt; 1:           Original Frequencies 814 3697 19 34 16  0
#&gt; 2: Frequencies after Perturbation 801 3729 15 23 12  0
#&gt; 
#&gt; Transitions:
#&gt;     transition Frequency
#&gt;  1:    1 --&gt; 1       721
#&gt;  2:    1 --&gt; 2        91
#&gt;  3:    1 --&gt; 3         1
#&gt;  4:    1 --&gt; 4         1
#&gt;  5:    2 --&gt; 1        78
#&gt;  6:    2 --&gt; 2      3603
#&gt;  7:    2 --&gt; 3         5
#&gt;  8:    2 --&gt; 4         5
#&gt;  9:    2 --&gt; 5         6
#&gt; 10:    3 --&gt; 2        10
#&gt; 11:    3 --&gt; 3         9
#&gt; 12:    4 --&gt; 2        17
#&gt; 13:    4 --&gt; 4        17
#&gt; 14:    5 --&gt; 1         2
#&gt; 15:    5 --&gt; 2         8
#&gt; 16:    5 --&gt; 5         6
#&gt; </div><div class='input'>
<span class='co'>## application on a data.frame</span>
<span class='co'>## pram can only be applied to factors, thus we have to recode</span>
<span class='co'>## to factors before the method can be applied</span>
<span class='no'>testdata</span>$<span class='no'>roof</span> <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>testdata</span>$<span class='no'>roof</span>)
<span class='no'>testdata</span>$<span class='no'>walls</span> <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>testdata</span>$<span class='no'>walls</span>)
<span class='no'>testdata</span>$<span class='no'>water</span> <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>testdata</span>$<span class='no'>water</span>)

<span class='co'>## pram() is applied within subgroups defined by</span>
<span class='co'>## variables "urbrur" and "sex"</span>
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='no'>testdata</span>, <span class='kw'>variables</span><span class='kw'>=</span><span class='st'>"roof"</span>,
  <span class='kw'>strata_variables</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"urbrur"</span>,<span class='st'>"sex"</span>))
<span class='fu'>print</span>(<span class='no'>res</span>)</div><div class='output co'>#&gt; Number of changed observations: 
#&gt; - - - - - - - - - - - 
#&gt; roof != roof_pram : 227 (4.96%)</div><div class='input'><span class='fu'>summary</span>(<span class='no'>res</span>)</div><div class='output co'>#&gt; Variable:  roof
#&gt;  ----------------------
#&gt; Frequencies in original and perturbed data:
#&gt;                              roof   2    4  5  6  9 NA
#&gt; 1:           Original Frequencies 814 3697 19 34 16  0
#&gt; 2: Frequencies after Perturbation 818 3704 13 37  8  0
#&gt; 
#&gt; Transitions:
#&gt;     transition Frequency
#&gt;  1:    1 --&gt; 1       722
#&gt;  2:    1 --&gt; 2        85
#&gt;  3:    1 --&gt; 3         1
#&gt;  4:    1 --&gt; 4         5
#&gt;  5:    1 --&gt; 5         1
#&gt;  6:    2 --&gt; 1        91
#&gt;  7:    2 --&gt; 2      3593
#&gt;  8:    2 --&gt; 3         1
#&gt;  9:    2 --&gt; 4         9
#&gt; 10:    2 --&gt; 5         3
#&gt; 11:    3 --&gt; 2         8
#&gt; 12:    3 --&gt; 3        11
#&gt; 13:    4 --&gt; 1         3
#&gt; 14:    4 --&gt; 2         8
#&gt; 15:    4 --&gt; 4        23
#&gt; 16:    5 --&gt; 1         2
#&gt; 17:    5 --&gt; 2        10
#&gt; 18:    5 --&gt; 5         4
#&gt; </div><div class='input'>
<span class='co'>## default parameters (pd=0.8 and alpha=0.5) for the generation</span>
<span class='co'>## of the invariant transition matrix will be used for all variables</span>
<span class='no'>res1</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='no'>testdata</span>, <span class='kw'>variables</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"roof"</span>,<span class='st'>"walls"</span>,<span class='st'>"water"</span>))
<span class='fu'>print</span>(<span class='no'>res1</span>)</div><div class='output co'>#&gt; Number of changed observations: 
#&gt; - - - - - - - - - - - 
#&gt; roof != roof_pram : 108 (2.36%)
#&gt; walls != walls_pram : 216 (4.72%)
#&gt; water != water_pram : 268 (5.85%)</div><div class='input'>
<span class='co'>## specific parameters for each variable</span>
<span class='no'>res2</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='no'>testdata</span>,<span class='kw'>variables</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"roof"</span>,<span class='st'>"walls"</span>,<span class='st'>"water"</span>),
  <span class='kw'>pd</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>0.95</span>,<span class='fl'>0.8</span>,<span class='fl'>0.9</span>), <span class='kw'>alpha</span><span class='kw'>=</span><span class='fl'>0.5</span>)
<span class='fu'>print</span>(<span class='no'>res2</span>)</div><div class='output co'>#&gt; Number of changed observations: 
#&gt; - - - - - - - - - - - 
#&gt; roof != roof_pram : 101 (2.21%)
#&gt; walls != walls_pram : 364 (7.95%)
#&gt; water != water_pram : 265 (5.79%)</div><div class='input'>
<span class='co'>## detailed information on pram-parameters (such as the transition matrix 'Rs')</span>
<span class='co'>## is stored in the output, eg. for variable 'roof'</span>
<span class='fu'>attr</span>(<span class='no'>res2</span>, <span class='st'>"pram_params"</span>)$<span class='no'>roof</span></div><div class='output co'>#&gt; $Rs
#&gt;             2          4           5           6           9
#&gt; 2 0.954567185 0.03951272 0.001780602 0.002544967 0.001594524
#&gt; 4 0.008699853 0.98634404 0.001481717 0.002169618 0.001304777
#&gt; 5 0.076284748 0.28831094 0.631545979 0.001746827 0.002111505
#&gt; 6 0.060929496 0.23591404 0.000976168 0.700947786 0.001232506
#&gt; 9 0.081121412 0.30148510 0.002507412 0.002619076 0.612267001
#&gt; 
#&gt; $pd
#&gt; [1] 0.95
#&gt; 
#&gt; $alpha
#&gt; [1] 0.5
#&gt; </div><div class='input'>
<span class='co'>## we can also specify a custom transition-matrix directly</span>
<span class='co'># for variable roof; matrix must have rownames and colnames that match</span>
<span class='co'># the levels of the variable that should be post-randomized</span>
<span class='co'># rowSums() and colSums() must equal 1 too!</span>
<span class='no'>mat</span> <span class='kw'>&lt;-</span> <span class='fu'>diag</span>(<span class='fu'>length</span>(<span class='fu'>levels</span>(<span class='no'>testdata</span>$<span class='no'>roof</span>)))
<span class='fu'>rownames</span>(<span class='no'>mat</span>) <span class='kw'>&lt;-</span> <span class='fu'>colnames</span>(<span class='no'>mat</span>) <span class='kw'>&lt;-</span> <span class='fu'>levels</span>(<span class='no'>testdata</span>$<span class='no'>roof</span>)
<span class='no'>res3</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='no'>testdata</span>,<span class='kw'>variables</span><span class='kw'>=</span><span class='st'>"roof"</span>, <span class='kw'>pd</span><span class='kw'>=</span><span class='no'>mat</span>)
<span class='fu'>print</span>(<span class='no'>res3</span>) <span class='co'># of course, nothing has changed!</span></div><div class='output co'>#&gt; Number of changed observations: 
#&gt; - - - - - - - - - - - 
#&gt; roof != roof_pram : 0 (0%)</div><div class='input'>
<span class='co'>## it is possible use a transistion matrix for a variable and use the 'traditional' way</span>
<span class='co'>## of specifying a number for the minimal diagonal entries of the transision matrix</span>
<span class='co'>## for other variables. In this case we must supply \code{pd} as list.</span>
<span class='no'>res4</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='no'>testdata</span>,<span class='kw'>variables</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"roof"</span>,<span class='st'>"walls"</span>), <span class='kw'>pd</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='no'>mat</span>,<span class='fl'>0.5</span>), <span class='kw'>alpha</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>NA</span>, <span class='fl'>0.5</span>))
<span class='fu'>print</span>(<span class='no'>res4</span>)</div><div class='output co'>#&gt; Number of changed observations: 
#&gt; - - - - - - - - - - - 
#&gt; roof != roof_pram : 0 (0%)
#&gt; walls != walls_pram : 456 (9.96%)</div><div class='input'><span class='fu'>summary</span>(<span class='no'>res4</span>)</div><div class='output co'>#&gt; Variable:  roof
#&gt;  ----------------------
#&gt; Frequencies in original and perturbed data:
#&gt;                              roof   2    4  5  6  9 NA
#&gt; 1:           Original Frequencies 814 3697 19 34 16  0
#&gt; 2: Frequencies after Perturbation 814 3697 19 34 16  0
#&gt; 
#&gt; Transitions:
#&gt;    transition Frequency
#&gt; 1:    1 --&gt; 1       814
#&gt; 2:    2 --&gt; 2      3697
#&gt; 3:    3 --&gt; 3        19
#&gt; 4:    4 --&gt; 4        34
#&gt; 5:    5 --&gt; 5        16
#&gt; 
#&gt; Variable:  walls
#&gt;  ----------------------
#&gt; Frequencies in original and perturbed data:
#&gt;                             walls    2    3  9 NA
#&gt; 1:           Original Frequencies 1203 3327 50  0
#&gt; 2: Frequencies after Perturbation 1197 3353 30  0
#&gt; 
#&gt; Transitions:
#&gt;    transition Frequency
#&gt; 1:    1 --&gt; 1       982
#&gt; 2:    1 --&gt; 2       220
#&gt; 3:    1 --&gt; 3         1
#&gt; 4:    2 --&gt; 1       206
#&gt; 5:    2 --&gt; 2      3117
#&gt; 6:    2 --&gt; 3         4
#&gt; 7:    3 --&gt; 1         9
#&gt; 8:    3 --&gt; 2        16
#&gt; 9:    3 --&gt; 3        25
#&gt; </div><div class='input'><span class='fu'>attr</span>(<span class='no'>res4</span>, <span class='st'>"pram_params"</span>)</div><div class='output co'>#&gt; $roof
#&gt; $roof$Rs
#&gt;   2 4 5 6 9
#&gt; 2 1 0 0 0 0
#&gt; 4 0 1 0 0 0
#&gt; 5 0 0 1 0 0
#&gt; 6 0 0 0 1 0
#&gt; 9 0 0 0 0 1
#&gt; 
#&gt; $roof$pd
#&gt;   2 4 5 6 9
#&gt; 2 1 0 0 0 0
#&gt; 4 0 1 0 0 0
#&gt; 5 0 0 1 0 0
#&gt; 6 0 0 0 1 0
#&gt; 9 0 0 0 0 1
#&gt; 
#&gt; $roof$alpha
#&gt; [1] NA
#&gt; 
#&gt; 
#&gt; $walls
#&gt; $walls$Rs
#&gt;            2         3           9
#&gt; 2 0.80649995 0.1878785 0.005621558
#&gt; 3 0.06793442 0.9271329 0.004932626
#&gt; 9 0.13525469 0.3282169 0.536528377
#&gt; 
#&gt; $walls$pd
#&gt; [1] 0.5
#&gt; 
#&gt; $walls$alpha
#&gt; [1] 0.5
#&gt; 
#&gt; </div><div class='input'>
<span class='co'>## application to objects of class sdcMicro with default parameters</span>
<span class='fu'>data</span>(<span class='no'>testdata2</span>)
<span class='no'>testdata2</span>$<span class='no'>urbrur</span> <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>testdata2</span>$<span class='no'>urbrur</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>createSdcObj</span>(<span class='no'>testdata2</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'roof'</span>,<span class='st'>'walls'</span>,<span class='st'>'water'</span>,<span class='st'>'electcon'</span>,<span class='st'>'relat'</span>,<span class='st'>'sex'</span>),
  <span class='kw'>numVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'expend'</span>,<span class='st'>'income'</span>,<span class='st'>'savings'</span>), <span class='kw'>w</span><span class='kw'>=</span><span class='st'>'sampling_weight'</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='no'>sdc</span>, <span class='kw'>variables</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"urbrur"</span>))
<span class='fu'>print</span>(<span class='no'>sdc</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"pram"</span>)</div><div class='output co'>#&gt; Post-Randomization (PRAM):
#&gt; Variable: urbrur 
#&gt; --&gt; final Transition-Matrix:
#&gt;            1         2
#&gt; 1 0.83503881 0.1649612
#&gt; 2 0.06748412 0.9325159
#&gt; 
#&gt; Changed observations:
#&gt;   variable nrChanges percChanges
#&gt; 1   urbrur        12        12.9
#&gt; ---------------------------------------------------------------------- 
#&gt; </div><div class='input'>
<span class='co'>## this is equal to the previous application. If argument 'variables' is NULL,</span>
<span class='co'>## all variables from slot 'pramVars' will be used if possible.</span>
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>createSdcObj</span>(<span class='no'>testdata2</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'roof'</span>,<span class='st'>'walls'</span>,<span class='st'>'water'</span>,<span class='st'>'electcon'</span>,<span class='st'>'relat'</span>,<span class='st'>'sex'</span>),
  <span class='kw'>numVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'expend'</span>,<span class='st'>'income'</span>,<span class='st'>'savings'</span>), <span class='kw'>w</span><span class='kw'>=</span><span class='st'>'sampling_weight'</span>,
  <span class='kw'>pramVars</span><span class='kw'>=</span><span class='st'>"urbrur"</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='no'>sdc</span>)
<span class='fu'>print</span>(<span class='no'>sdc</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"pram"</span>)</div><div class='output co'>#&gt; Post-Randomization (PRAM):
#&gt; Variable: urbrur 
#&gt; --&gt; final Transition-Matrix:
#&gt;            1         2
#&gt; 1 0.89575182 0.1042482
#&gt; 2 0.04264698 0.9573530
#&gt; 
#&gt; Changed observations:
#&gt;   variable nrChanges percChanges
#&gt; 1   urbrur        10       10.75
#&gt; ---------------------------------------------------------------------- 
#&gt; </div><div class='input'>
<span class='co'>## we can specify transition matrices for sdcMicroObj-objects too</span>
<span class='no'>testdata2</span>$<span class='no'>roof</span> <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>testdata2</span>$<span class='no'>roof</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>createSdcObj</span>(<span class='no'>testdata2</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'roof'</span>,<span class='st'>'walls'</span>,<span class='st'>'water'</span>,<span class='st'>'electcon'</span>,<span class='st'>'relat'</span>,<span class='st'>'sex'</span>),
  <span class='kw'>numVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'expend'</span>,<span class='st'>'income'</span>,<span class='st'>'savings'</span>), <span class='kw'>w</span><span class='kw'>=</span><span class='st'>'sampling_weight'</span>)
<span class='no'>mat</span> <span class='kw'>&lt;-</span> <span class='fu'>diag</span>(<span class='fu'>length</span>(<span class='fu'>levels</span>(<span class='no'>testdata2</span>$<span class='no'>roof</span>)))
<span class='fu'>rownames</span>(<span class='no'>mat</span>) <span class='kw'>&lt;-</span> <span class='fu'>colnames</span>(<span class='no'>mat</span>) <span class='kw'>&lt;-</span> <span class='fu'>levels</span>(<span class='no'>testdata2</span>$<span class='no'>roof</span>)
<span class='no'>mat</span>[<span class='fl'>1</span>,] <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='fl'>0.9</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0.05</span>,<span class='fl'>0.05</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>pram</span>(<span class='no'>sdc</span>, <span class='kw'>variables</span><span class='kw'>=</span><span class='st'>"roof"</span>, <span class='kw'>pd</span><span class='kw'>=</span><span class='no'>mat</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: If pram is applied on key variables, the k-anonymity and risk assessment are not useful anymore.</span></div><div class='input'><span class='fu'>print</span>(<span class='no'>sdc</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"pram"</span>)</div><div class='output co'>#&gt; Post-Randomization (PRAM):
#&gt; Variable: roof 
#&gt; --&gt; final Transition-Matrix:
#&gt;     2 4 5    6    9
#&gt; 2 0.9 0 0 0.05 0.05
#&gt; 4 0.0 1 0 0.00 0.00
#&gt; 5 0.0 0 1 0.00 0.00
#&gt; 6 0.0 0 0 1.00 0.00
#&gt; 9 0.0 0 0 0.00 1.00
#&gt; 
#&gt; Changed observations:
#&gt;   variable nrChanges percChanges
#&gt; 1     roof         2        2.15
#&gt; ---------------------------------------------------------------------- 
#&gt; </div><div class='input'><span class='co'># we can also have a look at the transitions</span>
<span class='fu'><a href='get.sdcMicroObj.html'>get.sdcMicroObj</a></span>(<span class='no'>sdc</span>, <span class='st'>"pram"</span>)$<span class='no'>transitions</span></div><div class='output co'>#&gt; $roof
#&gt;    transition Frequency
#&gt; 1:    1 --&gt; 1        25
#&gt; 2:    1 --&gt; 4         2
#&gt; 3:    2 --&gt; 2        46
#&gt; 4:    3 --&gt; 3         6
#&gt; 5:    4 --&gt; 4         8
#&gt; 6:    5 --&gt; 5         6
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Alexander Kowarik, Matthias Templ, Bernhard Meindl

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Bernhard Meindl, Alexander Kowarik, Matthias Templ.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

